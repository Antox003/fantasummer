
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aggiunta Bonus</title>
    <link rel="stylesheet" href="admin-style.css">
</head>
<body>

        <header>

        <div class="logo">      
        
            <img src="img/logo.png" alt="nessuna immagine">
            <h2>FantaSummer</h2>

        </div>

            <nav>
                 <a href="classifica.html">Classifica</a>
                <a href="index.html">Regolamento</a>

            </nav>


    </header>




        <div id="titolo">
             <h1>Benvenuto admin!</h1>
    </div>

    <script type="module">

  document.addEventListener('contextmenu', e => e.preventDefault());

      var ipt = prompt("Inserisci la password");
      if(ipt!="estate2025"){
        window.location.href = "classifica.html";
      }

      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
      import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCJhZvF7eyEgupmF6cQd7NsvmeflUctrzo",
        authDomain: "fantasummer-f7e4a.firebaseapp.com",
        projectId: "fantasummer-f7e4a",
        storageBucket: "fantasummer-f7e4a.firebasestorage.app",
        messagingSenderId: "80899635536",
        appId: "1:80899635536:web:82c7d5908c605699dd5455"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Calcolo bonus/malus
      function getSelectedBonus() {
        const bonuses = document.querySelectorAll("#sliderBonus .checkbox:checked");
        let total = 0;
        bonuses.forEach(box => {
          const value = parseInt(box.closest(".valoreBonus").textContent.trim().replace('+', ''));
          if (!isNaN(value)) total += value;
        });
        return total;
      }

      function getSelectedMalus() {
        const malus = document.querySelectorAll("#sliderMalus .checkbox:checked");
        let total = 0;
        malus.forEach(box => {
          const value = parseInt(box.closest(".valoreMalus").textContent.trim().replace('-', ''));
          if (!isNaN(value)) total += value;
        });
        return total;
      }

      function clearCheckboxes() {
        document.querySelectorAll('.checkbox:checked').forEach(cb => cb.checked = false);
      }

      // Conferma bonus
      document.querySelector(".conferma").addEventListener("click", async () => {
        const nome = document.querySelector(".bottone").textContent.trim();
        const punti = getSelectedBonus();
        if (nome === "Lista partecipanti ▾" || punti === 0) return alert("Seleziona un nome e almeno un bonus.");

        const ref = doc(db, "partecipanti", nome);
        try {
          const snap = await getDoc(ref);
          const current = snap.exists() ? snap.data().punteggio : 0;
          await setDoc(ref, { nome, punteggio: current + punti }, { merge: true });
          alert(`Bonus assegnato a ${nome}: +${punti} punti`);
          clearCheckboxes();
        } catch (err) {
          console.error("Errore bonus:", err);
        }
      });

      // Conferma malus
      document.querySelector(".conferma2").addEventListener("click", async () => {
        const nome = document.querySelector(".bottoneMalus").textContent.trim();
        const punti = getSelectedMalus();
        if (nome === "Lista partecipanti ▾" || punti === 0) return alert("Seleziona un nome e almeno un malus.");

        const ref = doc(db, "partecipanti", nome);
        try {
          const snap = await getDoc(ref);
          const current = snap.exists() ? snap.data().punteggio : 0;
          await setDoc(ref, { nome, punteggio: current - punti }, { merge: true });
          alert(`Malus assegnato a ${nome}: -${punti} punti`);
          clearCheckboxes();
        } catch (err) {
          console.error("Errore malus:", err);
        }
      });
    </script>


   <h2 id="bonus">Aggiungi Bonus</h2>

       <div class="slider-container">
       <!-- <button class="freccia sinistra" onclick="scrollBonus(-1)">←</button>-->
        <div class="slider" id="sliderBonus">
            <div class="casella">
                <h3 class="valoreBonus">
                     <label>
                        <input type="checkbox" class="checkbox">
                     </label>
                    
                   +5</h3>
                <ul >
                    
                     <li>gara di verticali in acqua</li>
                     <li>seppellirsi sotto la sabbia</li>
                     <li>buttare qualcuno in acqua (benedetta dove si tocca)</li>
                     <li>vestirsi machati</li>
                     <li>qualsisi scherzo</li>
                     <li>dormire in spiaggia</li>
                     <li>bere alcol</li>
                     <li>vincere ad un torneo</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreBonus">           
                  <label>
                   <input type="checkbox" class="checkbox">
                  </label>
                +10</h3>
                <ul>
                    <li>bagno vestito</li>
                    <li>se ti chiedono l'insta</li>
                    <li>treccine</li>
                    <li>farsi truccare</li>
                    <li>avvistare una stella cadente</li>

                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreBonus">
                    
                 <label>
                   <input type="checkbox" class="checkbox">
                  </label>
                +15</h3>
                <ul>
                   <li>chiedere insta</li>
                   <li>fare gli auguri a sconosciuti </li>
                   <li>fare bagno di notte</li>
                   <li>mangiare un kebab alle 3 di notte</li>
                   <li>fare uno sport da spiaggia (Es: sup)</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreBonus"> 

                 <label>
                   <input type="checkbox" class="checkbox">
                 </label>
                                 
                 +20</h3>
                <ul>
                   <li>caduta divertente(spontanea)</li>
                   <li>24h senza dormire </li>
                   <li>far partire balli di gruppo</li>
                   <li>rimorchiare qualcuno</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreBonus">
                    
                 <label>
                   <input type="checkbox" class="checkbox">
                 </label>
                    
                 +50</h3>
                <ul>

                   <li>baciare uno sconosciuto </li>
                   <li>fare una foto con una celebrità </li>
                   <li>farsi un vero tatuaggio</li>
                   <li>fare un bagno nudo</li>
                   <li>scroccare in giro</li>
                   <li>farsi portare in barca da uno sconosciuto</li>


                </ul>
            </div>
        </div>
        <!--<button class="freccia destra" onclick="scrollBonus(1)">→</button> -->
    </div>

    <h2 class="concorrente">Al concorrente :</h2>

    <div class="boxbianca">
        <div class="dueBottoni">
        <button class="bottone" onclick="toggleDropdown()"> Lista partecipanti ▾</button>
        <button class="conferma">Conferma</button>
        </div>
          <div class="dropdown-content" id="listaPartecipanti">
         <a href="#">Toni</a>
         <a href="#">Errico</a>
         <a href="#">Faby</a>
         <a href="#">Benny</a>
         <a href="#">Franco</a>
         <a href="#">Mattia D'A</a>
         <a href="#">Federica M.</a>
         <a href="#">Federica S.</a>
         <a href="#">MDG</a>
         <a href="#">Enrico</a>
         <a href="#">Pier</a>
  </div>
    </div>

       <h2 id="malus">Aggiungi Malus</h2>
    <div class="slider-container">
    <!--<button class="freccia sinistra" onclick="scrollMalus(-1)">←</button>-->
        <div class="slider" id="sliderMalus">
            <div class="casella">
                <h3 class="valoreMalus">
                    
                  <label>
                   <input type="checkbox" class="checkbox">
                  </label> 
                    
                 -5</h3>
                <ul>
                   <li>essere ripreso mentre russi</li>
                   <li>litigare</li>
                   <li>perdere ad un torneo</li>
                   <li>uscire con sandali/ciabatte con calzini</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreMalus">
                    
                    
                  <label>
                   <input type="checkbox" class="checkbox">
                  </label>   
                 
                 -10</h3>
                <ul>
                    <li>essere buttati in acqua</li>
                    <li>pallonata in faccia</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreMalus">
                    
                  <label>
                   <input type="checkbox" class="checkbox">
                  </label>
                    
                 -15</h3>
                <ul>
                    <li>scottarsi al sole</li>
                    <li>punto da una medusa</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreMalus">
                         
                  <label>
                   <input type="checkbox" class="checkbox">
                  </label>

                 -20</h3>
                <ul>
                    <li>rimanere senza voce</li>
                    <li>vomitare</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreMalus">
                    
                  <label>
                   <input type="checkbox" class="checkbox">
                  </label>
                    
                 -50</h3>
                <ul>
                    <li>essere cacciati dai buttafuori</li>
                    <li>ammalarsi</li>
                </ul>
            </div>
            <div class="casella">
                <h3 class="valoreMalus">
                    
                  <label>
                   <input type="checkbox" class="checkbox">
                  </label>
                    
                 -100</h3>
                <ul>
                    <li>lasciarsi con il proprio/a fidanzato/a</li>
                </ul>
            </div>
        </div>
       <!-- <button class="freccia destra" onclick="scrollMalus(1)">→</button>-->
    </div>

        <h2 class="concorrente">Al concorrente :</h2>

      <div class="boxbianca">

      <div class="dueBottoni">
        <button class="bottoneMalus" onclick="toggleDropdownMalus()"> Lista partecipanti ▾</button>
        <button class="conferma2">Conferma</button>
      </div>
          <div class="dropdown-content" id="listaPartecipantiMalus">
         <a href="#">Toni</a>
         <a href="#">Errico</a>
         <a href="#">Faby</a>
         <a href="#">Benny</a>
         <a href="#">Franco</a>
         <a href="#">Mattia D'A</a>
         <a href="#">Federica M.</a>
         <a href="#">Federica S.</a>
         <a href="#">MDG</a>
         <a href="#">Enrico</a>
         <a href="#">Pier</a>

  </div>
    </div>

    <script>
        function scrollBonus(direction) {
            const slider = document.getElementById("sliderBonus");
            const scrollAmount = 260;
            slider.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
        }

        function scrollMalus(direction) {
            const slider = document.getElementById("sliderMalus");
            const scrollAmount = 260;
            slider.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
        }
    </script>


<script>
  function toggleDropdown() {
    document.getElementById("listaPartecipanti")
      .classList.toggle("show");
  }

  // Quando clicchi su un nome, aggiorna il bottone
  document.addEventListener("DOMContentLoaded", function () {
    const links = document.querySelectorAll("#listaPartecipanti a");
    const bottone = document.querySelector(".bottone");

    links.forEach(link => {
      link.addEventListener("click", function (e) {
        e.preventDefault(); // evita che salti la pagina
        bottone.textContent = this.textContent;
        document.getElementById("listaPartecipanti").classList.remove("show");
      });
    });
  });

  // Chiudi il menu se clicchi fuori
  window.onclick = function(event) {
    if (!event.target.matches('.bottone')) {
      const dropdowns = document.getElementsByClassName("dropdown-content");
      for (const dd of dropdowns) {
        dd.classList.remove('show');
      }
    }
  }
</script>


<script>
  // Mostra/Nasconde il menu Malus
  function toggleDropdownMalus() {
    document.getElementById("listaPartecipantiMalus")
      .classList.toggle("show");
  }

  // Imposta il nome cliccato nel bottone
  document.addEventListener("DOMContentLoaded", function () {
    const malusLinks = document.querySelectorAll("#listaPartecipantiMalus a");
    const malusBtn = document.querySelector(".bottoneMalus");

    malusLinks.forEach(link => {
      link.addEventListener("click", function (e) {
        e.preventDefault();
        malusBtn.textContent = this.textContent;
        document.getElementById("listaPartecipantiMalus").classList.remove("show");
      });
    });
  });

  // Chiude il menu se clicchi fuori
  window.onclick = function (event) {
    if (!event.target.matches('.bottoneMalus')) {
      const dropdown = document.getElementById("listaPartecipantiMalus");
      dropdown.classList.remove('show');
    }
  }
</script>




</body>
</html>