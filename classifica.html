<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classifica</title>
    <link rel="stylesheet" href="classifica-style.css">
</head>
<body>


           <header>

        <div class="logo">      
        
            <img src="img/logo.png" alt="nessuna immagine">
            <h2>FantaSummer</h2>

        </div>

            <nav>
                <button> <a href="index.html">Regolamento</a></button> 
                <button><a href="admin.html">Accedi</a></button>

            </nav>


    </header>

     <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCJhZvF7eyEgupmF6cQd7NsvmeflUctrzo",
      authDomain: "fantasummer-f7e4a.firebaseapp.com",
      projectId: "fantasummer-f7e4a",
      storageBucket: "fantasummer-f7e4a.firebasestorage.app",
      messagingSenderId: "80899635536",
      appId: "1:80899635536:web:82c7d5908c605699dd5455"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Quando la pagina Ã¨ caricata
    window.addEventListener("DOMContentLoaded", async () => {
      const partecipantiRef = collection(db, "partecipanti");
      const snapshot = await getDocs(partecipantiRef);

      const data = [];
      snapshot.forEach(doc => {
        const d = doc.data();
        data.push({ nome: d.nome, punteggio: d.punteggio || 0 });
      });

      // Ordina per punteggio decrescente
      data.sort((a, b) => b.punteggio - a.punteggio);

      // Scrivi i dati nel DOM
      const cards = document.querySelectorAll(".top-card");
      for (let i = 0; i < cards.length; i++) {
        const card = cards[i];
        const partecipante = data[i];
        if (partecipante) {
          card.querySelector("p").textContent = partecipante.nome;
          card.querySelector(".point").textContent = partecipante.punteggio.toString().padStart(3, "0");
        } else {
          card.style.display = "none"; // nasconde slot vuoti
        }
      }
    });
  </script>



    <h1>CLASSIFICA</h1>

    <div class="top">
        <div class="top-card">
            <div class="number">1</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Toni</p>
            </div>
            <div class="point"></div>
        </div>

        <div class="top-card">
            <div class="number">2</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Errico</p>
            </div>
            <div class="point"></div>
        </div>

        <div class="top-card">
            <div class="number">3</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Faby</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">4</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Benny</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">5</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Franco</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">6</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Mattia D'A.</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">7</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Fedrica M.</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">8</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Federica S.</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">9</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>MDG</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">10</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Enrico</p>
            </div>
            <div class="point">000</div>
        </div>

        <div class="top-card">
            <div class="number">11</div>
            <div class="profile">
                <img src="./img/user.png" alt="">
                <p>Pier</p>
            </div>
            <div class="point">000</div>
        </div>

    </div>
</body>
</html>